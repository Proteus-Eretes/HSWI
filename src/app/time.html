<link rel="import" href="../../bower_components/polymer/polymer.html">
<script>
var finalTime = function(time, bonussecond) {
  if (+time === 0) {
    return 0;
  }
  return +time + (+bonussecond);
};

var formatTime = function (time) {
    var centiseconds = Math.round((+time * 10)%10);
    var seconds = Math.floor(+time % 60);
    var minutes = Math.floor(+time / 60);
    var hours = Math.floor(minutes / 60);
    minutes -= hours * 60;
    var timeString = '';
    if(centiseconds > 9)
    {
      centiseconds = 0;
      seconds++;
    }
    if (hours > 0) timeString += hours + ':';
    if (minutes >= 0) timeString += (minutes < 10) ? ('0' + minutes) : (minutes);
    timeString += ":";
    if (seconds >= 0) timeString += (seconds < 10) ? ('0' + seconds) : (seconds);
    timeString += ".";
    timeString += centiseconds;

    return timeString;
}
</script>
<dom-module id="final-time">
  <template>
    <template is="dom-if" if="[[!_hasValue(team.disqualified)]]">
      Gedisqualificeerd
    </template>
    <template is="dom-if" if="[[!_hasValue(team.excluded)]]">
      Excluded
    </template>
    <template is="dom-if" if="[[_hasValue(team.excluded + team.disqualified)]]">
      [[_displayTime(team.totaltime,team.bonussecond)]]
    </template>
  </template>
  <script>
  'use strict';
  Polymer({
    is: 'final-time',
    _displayTime: function(time,bonussecond) {
      return formatTime(finalTime(time,bonussecond));
    },
    _hasValue: function(field) {
      return field == 0;
    },
    properties: {
      team : {
        type: Array,
        notify:false,
        readOnly: false,
      }
    }
  })
  </script>
</dom-module>
