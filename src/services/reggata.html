<script>


    /**
     * Get the list of reggatas
     */
    const requestReggataList = function(self) {
        fetch('https://beta.hoesnelwasik.nl/api/')
            .then(
                function(res) {
                    if (res.status !== 200) {
                        return;
                    }

                    res.json().then(function (data) {
                        self.regattas = data;
                    });
                }
            )
            .catch(function (err) {
                console.log('Something went badly wrong: -S', err);
            });
    };

    /**
     * get the fields in a regatta
     * @param  {object} self
     * @param  {string} match
     * @param  {string} year
     */
    const requestFields = function(self, match, year) {
        if (!year) {
            year = 0;
        }
        if (!match) {
            match = 0;
        }
        fetch('https://beta.hoesnelwasik.nl/api/wd/' + match + '/' + year + '/velden/')
            .then(
                function(res) {
                    if (res.status !== 200) {
                        return;
                    }

                    res.json().then(function (data) {
                        self.fields = data;
                    });
                }
            )
            .catch(function(err) {
                console.log('Something went badly wrong: -S', err);
            });
    };

    /**
     * get the clubs in a regatta
     * @param  {object} self
     * @param  {string} match
     * @param  {string} year
     */
    const requestClubs = function(self, match, year) {
        if (!year) {
            year = 0;
        }
        if (!match) {
            match = 0;
        }
        fetch('https://beta.hoesnelwasik.nl/api/wd/' + match + '/' + year + '/clublist/')
            .then(
                function(res) {
                    if (res.status !== 200) {
                        return;
                    }

                    res.json().then(function(data) {
                        self.clubs = data;
                    });
                }
            )
            .catch(function(err) {
                console.log('Something went badly wrong: -S', err);
            });
    };
</script>
