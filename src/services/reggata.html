<script>
  var fillFields = function (array, field) {
      if (array != null) {
          var object = {}, i, length = array.length, res = [];
          for (i = 0; i < length; i += 1) {
              object[array[i][field]] = array[i];
          }
          for (i in object) {
              res.push(object[i]);
          }
          return res;
      }
  };

  var requestReggataList = function(self) {
      fetch('https://beta.hoesnelwasik.nl/api/')
        .then(
          function(res) {
            if (res.status !== 200) {
              console.log('Looks like something did a crash');
              return;
            }

            res.json().then(function(data) {
              self.regattas = data;
            });
          }
        )
        .catch(function(err) {
          console.log('Something went badly wrong: -S' ,err);
        });
    };

    var requestFields = function(self,match,year) {
      if (!year) {
        year = 0;
      }
      fetch('https://beta.hoesnelwasik.nl/api/wd/'+match+'/'+year+'/velden/')
        .then(
          function(res) {
            if (res.status !== 200) {
              console.log('Looks like something did a crash');
              return;
            }

            res.json().then(function(data) {
              self.fields = data;
            });
          }
        )
        .catch(function(err) {
          console.log('Something went badly wrong: -S' ,err);
        });
    }

    var requestClubs = function(self,match,year) {
      if (!year) {
        year = 0;
      }
      fetch('https://beta.hoesnelwasik.nl/api/wd/'+match+'/'+year+'/clublist/')
        .then(
          function(res) {
            if (res.status !== 200) {
              console.log('Looks like something did a crash');
              return;
            }

            res.json().then(function(data) {
              self.clubs = data;
            });
          }
        )
        .catch(function(err) {
          console.log('Something went badly wrong: -S' ,err);
        });
    }
</script>
